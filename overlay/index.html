<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>OBS clips player</title>
</head>
<body style="background-color:limegreen;">
<div style="overflow: hidden; width: 100%; height: 460px;">
    <video id="video" width="100%" height="460px" autoplay="autoplay" loop="loop"></video>
    <video id="video2" width="100%" height="460px" autoplay="autoplay" loop="loop"></video>
</div>
<script type="text/javascript " src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">
    var socket = io.connect();
    var video = document.getElementById('video');
    var video2 = document.getElementById('video2');
    var source = document.createElement('source');
    var source2 = document.createElement('source');

    source.setAttribute('src', '');
    source2.setAttribute('src', '');

    video.appendChild(source);
    video2.appendChild(source2);
    $('#video').hide();
    $('#video2').hide();

    $('#video').on('loadeddata', function () {
        socket.emit('loaded');
        $('#video2').hide();
        $('#video').show();
        video.play();
        video2.pause();
    })
    $('#video2').on('loadeddata', function () {
        socket.emit('loaded');
        $('#video').hide();
        $('#video2').show();
        video2.play();
        video.pause();
    })

    socket.on('changeClip', function (value) {
        if ($('#video').is(":visible") || $('#video2').is(":hidden")) {
            source2.setAttribute('src', value);
            video2.load();
        } else {
            source.setAttribute('src', value);
            video.load();
        }

    });

    socket.on('stop', function () {
        if ($('#video').length)
            $('#video').hide();
        video.pause();
        $('#video2').hide();
        video2.pause();
    });

    socket.on('hide', function () {
        $('#video').hide();
        video.pause();
        $('#video2').hide();
        video2.pause();
    });
</script>
</body>
</html>
